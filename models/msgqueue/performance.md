一、容量模型
记：
U = 当前并发会话数（你的场景是 500）。
T = 单条消息业务处理耗时（3–5 s；“等待时间”）。
I = MaxInflightPerPartition（这里为 32）。
P = Topic 分区数。
由于“一问一答”的严格串行（同一用户只会同时处理 1 条），系统需要的并发处理位数 ≈ U；
系统可提供的并发处理位数 = min(P × I, U)（每分区最多并行 I 条）。
可持续吞吐（仅看“用户→Bot”这条重路径）：

λmax = min(P × I, U) / T (条/秒)

直观理解：只要 P×I ≥ U，分区/并发不再是瓶颈，此时吞吐只取决于会话数与业务耗时，即 λmax = U / T

二、代入我们的规模（500+人同时在线，每3秒产生2条消息），给出“有没有瓶颈 + 富余量”
情形 A：P=32，I=32（推荐）
并发上限：P×I = 32×32 = 1024 处理位。
我们的并发会话 U=500，满足 1024 ≥ 500，所以不会卡在分区/并发。
稳态容量：
若 T=3 s：
λmax = 500 / 3 ≈ 166.7 条/秒
λmax = 500/5 ≈ 100 条/秒